[- $http_headers_out{"Content-Type"} = "text/event-stream" -]
[- $http_headers_out{"Cache-Control"} = "no-cache" -]
[- 
use IPC::ShareLite;
use POSIX qw( ceil );
use Data::Dumper;

$processing_progress = IPC::ShareLite->new(
	-key		=> 6455,
	-create		=> 'yes',
	-destroy	=> 'no'
) or die $!;

-]
[- $progress = $processing_progress->fetch -]
[$ if ($progress ne "") $][+ "data: " . ceil($progress) . "\n\n" +][$ else $][+ "data: TERMINATE\n\n" +][$ endif $]